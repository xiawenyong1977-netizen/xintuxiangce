# èŠ¯å›¾ç›¸å†Œå›½é™…åŒ–æŠ€æœ¯å®ç°æ€»ç»“

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£å…¨é¢æ€»ç»“äº†èŠ¯å›¾ç›¸å†Œï¼ˆXinTu Albumï¼‰çš„å›½é™…åŒ–ï¼ˆi18nï¼‰æŠ€æœ¯å®ç°æ–¹æ¡ˆï¼Œæ¶µç›–ç”¨æˆ·ç•Œé¢ã€åŠ¨æ€å†…å®¹ã€åŸç”Ÿä»£ç å’Œè·¨å¹³å°ä¸€è‡´æ€§ç­‰å„ä¸ªæ–¹é¢ã€‚

**æŠ€æœ¯æ ˆ**ï¼š
- **i18n åº“**: `i18next` + `react-i18next`
- **æ”¯æŒè¯­è¨€**: ä¸­æ–‡ï¼ˆzhï¼‰ã€è‹±æ–‡ï¼ˆenï¼‰
- **å­˜å‚¨æ–¹æ¡ˆ**: è¯­è¨€è®¾ç½®å­˜å‚¨åœ¨ `ImageStorageService` ä¸­ï¼Œç»Ÿä¸€ç®¡ç†åº”ç”¨é…ç½®
- **å¹³å°æ”¯æŒ**: PCç«¯ï¼ˆElectronï¼‰å’Œç§»åŠ¨ç«¯ï¼ˆReact Native Androidï¼‰

---

## ğŸ—ï¸ åŸºæœ¬å®ç°æ–¹æ¡ˆ

### 1.1 æ ¸å¿ƒæ¶æ„

#### 1.1.1 i18n åˆå§‹åŒ–é…ç½®

**æ–‡ä»¶ä½ç½®**: `src/i18n/index.js`

```javascript
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import zh from './locales/zh/common.json';
import en from './locales/en/common.json';

const resources = {
  zh: { common: zh },
  en: { common: en },
};

i18n
  .use(initReactI18next)
  .init({
    resources,
    lng: getSavedLanguageSync(),
    fallbackLng: 'zh',
    defaultNS: 'common',
    interpolation: {
      escapeValue: false, // Reactå·²ç»è½¬ä¹‰äº†
    },
    compatibilityJSON: 'v3', // å…¼å®¹React Native
  });
```

**å…³é”®ç‰¹æ€§**ï¼š
- **åŒæ­¥åˆå§‹åŒ–**ï¼šä½¿ç”¨ `getSavedLanguageSync()` åŒæ­¥è¯»å–è¯­è¨€è®¾ç½®ï¼Œç¡®ä¿åº”ç”¨å¯åŠ¨æ—¶è¯­è¨€æ­£ç¡®
- **å¼‚æ­¥åŠ è½½**ï¼šåº”ç”¨å¯åŠ¨åé€šè¿‡ `loadSavedLanguage()` å¼‚æ­¥åŠ è½½ä¿å­˜çš„è¯­è¨€è®¾ç½®ï¼Œæ”¯æŒ `react-native-localize`
- **è¯­è¨€æŒä¹…åŒ–**ï¼šè¯­è¨€è®¾ç½®å­˜å‚¨åœ¨ `ImageStorageService` çš„ `app_language` å­—æ®µä¸­

#### 1.1.2 è¯­è¨€æ£€æµ‹æœºåˆ¶

**ç³»ç»Ÿè¯­è¨€æ£€æµ‹**ï¼š

1. **Web/Desktop ç¯å¢ƒ**ï¼š
   ```javascript
   const detectSystemLanguage = () => {
     if (typeof navigator !== 'undefined' && navigator.language) {
       const systemLang = navigator.language.toLowerCase();
       if (systemLang.startsWith('zh')) return 'zh';
       if (systemLang.startsWith('en')) return 'en';
     }
     return 'zh'; // é»˜è®¤ä¸­æ–‡
   };
   ```

2. **React Native ç¯å¢ƒ**ï¼š
   ```javascript
   const detectSystemLanguageAsync = async () => {
     if (isReactNative) {
       const localizeModule = await import('react-native-localize');
       const locales = localizeModule.getLocales();
       if (locales && locales.length > 0) {
         const systemLang = locales[0].languageCode.toLowerCase();
         if (systemLang === 'zh') return 'zh';
         if (systemLang === 'en') return 'en';
       }
     }
     return 'zh';
   };
   ```

**è¯­è¨€è®¾ç½®ç®¡ç†**ï¼š
- **è¯»å–**ï¼š`getCurrentLanguageAsync()` - ä» `ImageStorageService` è¯»å–ä¿å­˜çš„è¯­è¨€è®¾ç½®
- **ä¿å­˜**ï¼š`changeLanguage(lng)` - ä¿å­˜è¯­è¨€è®¾ç½®åˆ° `ImageStorageService` å¹¶åˆ‡æ¢ i18n è¯­è¨€
- **éªŒè¯**ï¼šåˆ‡æ¢è¯­è¨€åä¼šéªŒè¯ä¿å­˜æ˜¯å¦æˆåŠŸï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§

---

### 1.2 ç¿»è¯‘èµ„æºç»„ç»‡

**æ–‡ä»¶ç»“æ„**ï¼š
```
src/i18n/
â”œâ”€â”€ index.js                    # i18n é…ç½®å’Œå·¥å…·å‡½æ•°
â””â”€â”€ locales/
    â”œâ”€â”€ zh/
    â”‚   â””â”€â”€ common.json         # ä¸­æ–‡ç¿»è¯‘èµ„æº
    â””â”€â”€ en/
        â””â”€â”€ common.json         # è‹±æ–‡ç¿»è¯‘èµ„æº
```

**å‘½åç©ºé—´**ï¼š
- `common`: é€šç”¨ç¿»è¯‘å‘½åç©ºé—´ï¼ˆé»˜è®¤ï¼‰
- æ‰€æœ‰ç¿»è¯‘é”®éƒ½ä½¿ç”¨ `common` å‘½åç©ºé—´ï¼Œé€šè¿‡ `useTranslation('common')` ä½¿ç”¨

**ç¿»è¯‘é”®å‘½åè§„èŒƒ**ï¼š
- `app.*`: åº”ç”¨åŸºç¡€ä¿¡æ¯ï¼ˆå¦‚ `app.name`ï¼‰
- `home.*`: é¦–é¡µç›¸å…³ç¿»è¯‘ï¼ˆå¦‚ `home.ready`, `home.scanning`ï¼‰
- `category.*`: åˆ†ç±»ç›¸å…³ç¿»è¯‘ï¼ˆå¦‚ `category.noImages`ï¼‰
- `imagePreview.*`: å›¾ç‰‡é¢„è§ˆç›¸å…³ç¿»è¯‘ï¼ˆå¦‚ `imagePreview.detectionResult`ï¼‰
- `settings.*`: è®¾ç½®é¡µé¢ç›¸å…³ç¿»è¯‘ï¼ˆå¦‚ `settings.memberActivated`ï¼‰
- `common.*`: é€šç”¨ç¿»è¯‘ï¼ˆå¦‚ `common.success`, `common.cancel`ï¼‰

---

## ğŸ¨ ç”¨æˆ·å¯è§ç•Œé¢ä¿¡æ¯çš„å›½é™…åŒ–

### 2.1 ç•Œé¢åŸºç¡€æ–‡æœ¬å›½é™…åŒ–

#### 2.1.1 React ç»„ä»¶ä¸­çš„ä½¿ç”¨

**æ ‡å‡†ç”¨æ³•**ï¼š
```javascript
import { useTranslation } from 'react-i18next';

const MyComponent = () => {
  const { t, i18n } = useTranslation('common');
  
  return (
    <Text>{t('home.ready')}</Text>
  );
};
```

**å…³é”® API**ï¼š
- `t(key, options)`: ç¿»è¯‘å‡½æ•°ï¼Œæ ¹æ®å½“å‰è¯­è¨€è¿”å›å¯¹åº”çš„ç¿»è¯‘æ–‡æœ¬
- `i18n.language`: è·å–å½“å‰è¯­è¨€ä»£ç ï¼ˆ'zh' æˆ– 'en'ï¼‰
- `i18n.t(key, { lng: 'en' })`: æŒ‡å®šè¯­è¨€è¿›è¡Œç¿»è¯‘ï¼ˆç”¨äºåŠ¨æ€åˆ‡æ¢ï¼‰

#### 2.1.2 å¸¸è§ç•Œé¢å…ƒç´ ç¿»è¯‘

| ç¿»è¯‘é”® | ä¸­æ–‡ | è‹±æ–‡ | ä½¿ç”¨ä½ç½® |
|--------|------|------|----------|
| `app.name` | èŠ¯å›¾ç›¸å†Œ | Xintu Album | åº”ç”¨æ ‡é¢˜ |
| `home.ready` | å›¾ç‰‡åˆ†ç±»åº”ç”¨å·²å°±ç»ª | Image classification app is ready | é¦–é¡µçŠ¶æ€ |
| `home.scanning` | æ‰«æä¸­... | Scanning... | æ‰«æçŠ¶æ€ |
| `home.scanComplete` | æ‰«æå®Œæˆ | Scan complete | æ‰«æå®Œæˆæç¤º |
| `home.smartScan` | æ™ºèƒ½æ‰«æ | Smart Scan | æ‰«ææŒ‰é’® |
| `category.noImages` | æš‚æ— å›¾ç‰‡ | No images | ç©ºçŠ¶æ€æç¤º |
| `common.success` | æˆåŠŸ | Success | é€šç”¨æˆåŠŸæç¤º |
| `common.cancel` | å–æ¶ˆ | Cancel | å–æ¶ˆæŒ‰é’® |

**è‹±æ–‡ç•Œé¢æ•ˆæœå±•ç¤º**ï¼š

![PCç«¯è‹±æ–‡é¦–é¡µ](/assets/Screenshots/PC-english/ç…§ç‰‡æŒ‰å†…å®¹ï¼ŒåŸå¸‚ï¼Œé¢œè‰²æ™ºèƒ½åˆ†ç±».png)

*PCç«¯è‹±æ–‡ç•Œé¢ï¼šæŒ‰å†…å®¹ã€åŸå¸‚ã€é¢œè‰²æ™ºèƒ½åˆ†ç±»*

![ç§»åŠ¨ç«¯è‹±æ–‡é¦–é¡µ](/assets/Screenshots/Mobile-english/é¦–é¡µè‡ªåŠ¨æ˜¾ç¤ºæŒ‰å†…å®¹ï¼ŒæŒ‰åŸå¸‚ï¼ŒæŒ‰é¢œè‰²åˆ†ç±»çš„ç»´åº¦.jpg)

*ç§»åŠ¨ç«¯è‹±æ–‡ç•Œé¢ï¼šé¦–é¡µè‡ªåŠ¨æ˜¾ç¤ºæŒ‰å†…å®¹ã€æŒ‰åŸå¸‚ã€æŒ‰é¢œè‰²åˆ†ç±»çš„ç»´åº¦*

---

### 2.2 å¼¹çª—ï¼ˆAlertï¼‰å›½é™…åŒ–

#### 2.2.1 æ ‡å‡†å¼¹çª—å®ç°

**åŸºç¡€ç”¨æ³•**ï¼š
```javascript
import { useTranslation } from 'react-i18next';
import { Alert } from 'react-native';

const MyComponent = () => {
  const { t, i18n } = useTranslation('common');
  
  const showAlert = () => {
    Alert.alert(
      t('common.success'),
      t('settings.memberActivated')
    );
  };
};
```

#### 2.2.2 åŠ¨æ€è¯­è¨€å¼¹çª—ï¼ˆé‡è¦ï¼‰

**é—®é¢˜åœºæ™¯**ï¼šåœ¨å¼‚æ­¥å›è°ƒï¼ˆå¦‚ `setInterval`ï¼‰ä¸­ï¼Œ`t` å‡½æ•°å¯èƒ½ä½¿ç”¨çš„æ˜¯é—­åŒ…ä¸­çš„æ—§è¯­è¨€å€¼ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨ `i18n.t()` å¹¶æ˜¾å¼æŒ‡å®šè¯­è¨€å‚æ•°ï¼š
```javascript
// âŒ é”™è¯¯ç¤ºä¾‹ï¼šå¯èƒ½ä½¿ç”¨æ—§çš„è¯­è¨€å€¼
Alert.alert(t('common.success'), t('settings.memberActivated'));

// âœ… æ­£ç¡®ç¤ºä¾‹ï¼šä½¿ç”¨å½“å‰è¯­è¨€
const currentLang = i18n.language || 'zh';
Alert.alert(
  i18n.t('common.success', { lng: currentLang }),
  i18n.t('settings.memberActivated', { lng: currentLang })
);
```

**å®ç°ä½ç½®**ï¼š
- `src/screens/mobile/SettingsScreen.mobile.js`
- `src/screens/desktop/SettingsScreen.desktop.js`

**å…³é”®ä»£ç **ï¼š
```javascript
// ä¼šå‘˜æ¿€æ´»å¼¹çª—
const currentLang = i18n.language || 'zh';
Alert.alert(
  i18n.t('common.success', { lng: currentLang }),
  i18n.t('settings.memberActivated', { lng: currentLang })
);
```

---

## ğŸŒ åŸå¸‚ä¿¡æ¯çš„å›½é™…åŒ–

### 3.1 å®ç°ç­–ç•¥

**æ ¸å¿ƒåŸåˆ™**ï¼šåœ¨æ‰«ææ—¶æ ¹æ®ç”¨æˆ·è¯­è¨€é…ç½®ä¿å­˜å¯¹åº”è¯­è¨€çš„åŸå¸‚åç§°ï¼Œè€Œä¸æ˜¯åœ¨æ˜¾ç¤ºæ—¶ç¿»è¯‘ã€‚

#### 3.1.1 æ•°æ®æ¥æº

1. **è¿œç¨‹API**ï¼ˆä¼˜å…ˆï¼‰ï¼š
   - è¿”å›å­—æ®µï¼š`name`ï¼ˆè‹±æ–‡ï¼‰ã€`name_zh`ï¼ˆä¸­æ–‡ï¼‰ã€`admin1`ï¼ˆçœä»½è‹±æ–‡ï¼‰ã€`admin1_zh`ï¼ˆçœä»½ä¸­æ–‡ï¼‰
   - API: `https://api.bigdatacloud.net/data/reverse-geocode-client`

2. **æœ¬åœ°æ•°æ®**ï¼ˆé™çº§ï¼‰ï¼š
   - ä»…åŒ…å«ä¸­æ–‡åŸå¸‚åç§°
   - æ–‡ä»¶ï¼š`src/data/cities.json`

#### 3.1.2 JavaScript å®ç°

**æ–‡ä»¶ä½ç½®**: `src/services/CityLocationService.js`

**å…³é”®æ–¹æ³•**ï¼š
```javascript
async findNearestCityAsync(latitude, longitude, maxDistance = 200, useRemoteApi = true, language = 'zh') {
  // 1. æ£€æŸ¥ç¼“å­˜ï¼ˆåŒ…å«è¯­è¨€ä¿¡æ¯ï¼‰
  const cacheKey = this.getCacheKey(latitude, longitude, language);
  
  // 2. ä¼˜å…ˆä½¿ç”¨è¿œç¨‹APIï¼ˆä¼ é€’è¯­è¨€å‚æ•°ï¼‰
  if (useRemoteApi) {
    nearestCity = await this.findNearestCityRemote(latitude, longitude, language);
  }
  
  // 3. å¦‚æœè¿œç¨‹APIå¤±è´¥ï¼Œå›é€€åˆ°æœ¬åœ°æŸ¥è¯¢ï¼ˆæœ¬åœ°æ•°æ®åªæœ‰ä¸­æ–‡ï¼‰
  if (!nearestCity) {
    nearestCity = this.findNearestCity(latitude, longitude, maxDistance);
  }
  
  // 4. ç¼“å­˜ç»“æœï¼ˆä½¿ç”¨åŒ…å«è¯­è¨€çš„ç¼“å­˜é”®ï¼‰
  return nearestCity;
}
```

**è¿œç¨‹APIè°ƒç”¨**ï¼š
```javascript
async findNearestCityRemote(latitude, longitude, language = 'zh') {
  const url = `https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${latitude}&longitude=${longitude}&localityLanguage=${language}`;
  const response = await fetch(url);
  const data = await response.json();
  
  // æ ¹æ®è¯­è¨€é€‰æ‹©åŸå¸‚åç§°
  const cityName = language === 'en' 
    ? (data.locality || data.principalSubdivision)  // è‹±æ–‡ï¼šä¼˜å…ˆä½¿ç”¨ locality
    : (data.localityInfo?.administrative?.[0]?.name || data.locality);  // ä¸­æ–‡ï¼šä¼˜å…ˆä½¿ç”¨ä¸­æ–‡å
  
  return {
    name: cityName,
    province: language === 'en' ? data.principalSubdivision : data.localityInfo?.administrative?.[1]?.name,
    country: language === 'en' ? 'China' : 'ä¸­å›½',
    distance: null
  };
}
```

**ä½¿ç”¨ä½ç½®**: `src/services/GalleryScannerService.js`
```javascript
// è·å–å½“å‰è¯­è¨€è®¾ç½®
const currentLanguage = await getCurrentLanguageAsync();

// æŸ¥æ‰¾æœ€è¿‘çš„åŸå¸‚ä¿¡æ¯ï¼ˆä¼ é€’è¯­è¨€å‚æ•°ï¼‰
const nearestCity = await cityLocationService.findNearestCityAsync(
  latitude,
  longitude,
  200,
  useRemoteApi,
  currentLanguage  // ä¼ é€’å½“å‰è¯­è¨€è®¾ç½®
);

if (nearestCity) {
  locationInfo.city = nearestCity.name;  // ç›´æ¥ä½¿ç”¨å¯¹åº”è¯­è¨€çš„åŸå¸‚åç§°
  locationInfo.province = nearestCity.province;
  locationInfo.country = nearestCity.country || 'ä¸­å›½';
}
```

#### 3.1.3 Android åŸç”Ÿå®ç°

**æ–‡ä»¶ä½ç½®**: `android/app/src/main/java/com/imageclassifier/v2/GalleryScanService.java`

**å…³é”®ä»£ç **ï¼ˆç¬¬839-866è¡Œï¼‰ï¼š
```java
String cityName;
String provinceName;
if ("en".equals(language)) {
    // è‹±æ–‡ï¼šä¼˜å…ˆä½¿ç”¨è‹±æ–‡åï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨ä¸­æ–‡å
    cityName = mainCity.optString("name", mainCity.optString("name_zh", ""));
    // çœä»½ï¼šä¼˜å…ˆä½¿ç”¨admin1ï¼ˆçœä»½è‹±æ–‡åï¼‰ï¼Œå¦‚æœæ²¡æœ‰åˆ™å°è¯•admin1_zhï¼Œæœ€åfallbackåˆ°åŸå¸‚åç§°
    provinceName = mainCity.optString("admin1", 
        mainCity.optString("admin1_zh", 
            mainCity.optString("name_zh", mainCity.optString("name", ""))));
} else {
    // ä¸­æ–‡ï¼ˆé»˜è®¤ï¼‰ï¼šä¼˜å…ˆä½¿ç”¨ä¸­æ–‡åï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨è‹±æ–‡å
    cityName = mainCity.optString("name_zh", mainCity.optString("name", ""));
    // çœä»½ï¼šä¼˜å…ˆä½¿ç”¨admin1_zhï¼ˆçœä»½ä¸­æ–‡åï¼‰ï¼Œå¦‚æœæ²¡æœ‰åˆ™å°è¯•admin1ï¼Œæœ€åfallbackåˆ°åŸå¸‚åç§°
    provinceName = mainCity.optString("admin1_zh", 
        mainCity.optString("admin1", 
            mainCity.optString("name_zh", mainCity.optString("name", ""))));
    // æ ‡å‡†åŒ–åŸå¸‚åç§°ï¼šç§»é™¤"å¸‚"åç¼€ï¼ˆä»…ä¸­æ–‡ï¼‰
    if (cityName.endsWith("å¸‚")) {
        cityName = cityName.substring(0, cityName.length() - 1);
    }
}

Map<String, String> location = new HashMap<>();
location.put("city", cityName);
location.put("country", "en".equals(language) ? "China" : "ä¸­å›½"); // æ ¹æ®è¯­è¨€è®¾ç½®å›½å®¶åç§°
location.put("province", provinceName);
```

**è¯­è¨€å‚æ•°æ¥æº**ï¼š
- Android åŸç”Ÿä»£ç ä» `ImageStorageService` è¯»å– `app_language` è®¾ç½®
- åœ¨æ‰«ææ—¶ä¼ é€’è¯­è¨€å‚æ•°ç»™åŸå¸‚æŸ¥è¯¢æ–¹æ³•

---

### 3.2 æ˜¾ç¤ºé€»è¾‘

**ç›´æ¥æ˜¾ç¤º**ï¼šåŸå¸‚åç§°åœ¨æ‰«ææ—¶å·²æ ¹æ®ç”¨æˆ·è¯­è¨€é…ç½®ä¿å­˜ï¼Œæ˜¾ç¤ºæ—¶ç›´æ¥ä½¿ç”¨æ•°æ®åº“ä¸­å­˜å‚¨çš„å€¼ï¼Œæ— éœ€é¢å¤–ç¿»è¯‘ã€‚

**æ³¨æ„äº‹é¡¹**ï¼š
- âœ… **å·²å­˜å‚¨çš„æ•°æ®ä¸ä¼šè‡ªåŠ¨æ›´æ–°**ï¼šå¦‚æœç”¨æˆ·åˆ‡æ¢è¯­è¨€ï¼Œå·²æ‰«æçš„å›¾ç‰‡çš„åŸå¸‚åç§°ä¸ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œéœ€è¦é‡æ–°æ‰«æ
- âœ… **é™çº§å¤„ç†**ï¼šå¦‚æœè¿œç¨‹APIå¤±è´¥ï¼Œé™çº§åˆ°æœ¬åœ°æŸ¥è¯¢æ—¶åªèƒ½ä¿å­˜ä¸­æ–‡åç§°ï¼ˆæœ¬åœ°æ•°æ®åªæœ‰ä¸­æ–‡ï¼‰
- âœ… **ç¼“å­˜æœºåˆ¶**ï¼šä½¿ç”¨åŒ…å«è¯­è¨€çš„ç¼“å­˜é”®ï¼Œç¡®ä¿ä¸åŒè¯­è¨€çš„ç»“æœåˆ†åˆ«ç¼“å­˜

---

## ğŸ“‚ å†…å®¹ç±»åˆ«ä¿¡æ¯çš„å›½é™…åŒ–

### 4.1 å®ç°ç­–ç•¥

**æ ¸å¿ƒåŸåˆ™**ï¼šä»é…ç½®æ–‡ä»¶ä¸­è¯»å–ä¸­è‹±æ–‡åç§°ï¼ŒåŠ¨æ€é€‰æ‹©æ˜¾ç¤ºï¼Œè€Œä¸æ˜¯å­˜å‚¨åœ¨ i18n JSON æ–‡ä»¶ä¸­ã€‚

#### 4.1.1 æ•°æ®æ¥æº

**é…ç½®æ–‡ä»¶**: `public/initialSettings.json`

```json
{
  "categoryNameMap": {
    "social_activities": {
      "chinese": "ç¤¾äº¤æ´»åŠ¨",
      "english": "Social Activities"
    },
    "pets": {
      "chinese": "å® ç‰©èŒç…§",
      "english": "Pet Photos"
    },
    "single_person": {
      "chinese": "å•äººç…§ç‰‡",
      "english": "Single Person"
    },
    "foods": {
      "chinese": "ç¾é£Ÿè®°å½•",
      "english": "Food Records"
    },
    "travel_scenery": {
      "chinese": "æ—…è¡Œé£æ™¯",
      "english": "Travel Scenery"
    },
    "screenshot": {
      "chinese": "æ‰‹æœºæˆªå›¾",
      "english": "Mobile Screenshots"
    },
    "other": {
      "chinese": "å…¶å®ƒ",
      "english": "Other Images"
    },
    "idcard": {
      "chinese": "è¯ä»¶ç…§",
      "english": "ID Card"
    },
    "NA": {
      "chinese": "å¾…åˆ†ç±»",
      "english": "to be classified"
    },
    "qrcode": {
      "chinese": "äºŒç»´ç ",
      "english": "QR Code"
    }
  }
}
```

#### 4.1.2 JavaScript å®ç°

**æ–‡ä»¶ä½ç½®**: `src/services/ConfigService.js`

**å…³é”®æ–¹æ³•**ï¼š
```javascript
getCategoryDisplayName(categoryId, language = 'chinese') {
  const categoryByKey = this.getCategoryByKey(categoryId);
  if (categoryByKey) {
    return categoryByKey[language] || categoryByKey.chinese || categoryByKey.english || categoryId;
  }
  
  const category = this.getCategoryById(categoryId);
  if (category) {
    return category[language] || category.chinese || category.english || categoryId;
  }
  
  return categoryId;
}
```

**ä½¿ç”¨ä½ç½®**: `src/screens/desktop/HomeScreen.desktop.js`

```javascript
const categories = configService.getAllCategoriesWithUI().map(category => {
  // æ ¹æ®å½“å‰è¯­è¨€åŠ¨æ€é€‰æ‹©åˆ†ç±»åç§°
  const currentLang = i18n.language || 'zh';
  const categoryName = currentLang === 'en' 
    ? (category.english || category.chinese)  // è‹±æ–‡ï¼šä¼˜å…ˆä½¿ç”¨è‹±æ–‡ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨ä¸­æ–‡
    : (category.chinese || category.english);  // ä¸­æ–‡ï¼šä¼˜å…ˆä½¿ç”¨ä¸­æ–‡ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä½¿ç”¨è‹±æ–‡
  
  return {
    id: category.id,
    name: categoryName,
    icon: 'ğŸ“·',
    color: '#607D8B'
  };
});
```

**å›¾ç‰‡é¢„è§ˆé¡µé¢**: `src/screens/desktop/ImagePreviewScreen.desktop.js`

```javascript
const getCategoryInfo = (categoryId) => {
  const category = configService.getCategoryByKey(categoryId);
  if (!category) {
    return {
      name: i18n.t('imagePreview.unknownCategoryName'),
      icon: 'ğŸ“·',
      color: '#607D8B'
    };
  }
  
  // æ ¹æ®å½“å‰è¯­è¨€è®¾ç½®è·å–åˆ†ç±»åç§°
  const currentLang = i18n.language || 'zh';
  const language = currentLang === 'en' ? 'english' : 'chinese';
  
  return {
    name: category[language] || category.chinese || category.english || categoryId,
    icon: 'ğŸ“·',
    color: '#607D8B'
  };
};
```

---

### 4.2 è®¾è®¡ä¼˜åŠ¿

1. **å•ä¸€æ•°æ®æº**ï¼šåˆ†ç±»åç§°åªåœ¨ä¸€ä¸ªåœ°æ–¹ç»´æŠ¤ï¼ˆ`initialSettings.json`ï¼‰ï¼Œé¿å…é‡å¤
2. **è‡ªåŠ¨å›é€€**ï¼šå¦‚æœé¦–é€‰è¯­è¨€ä¸å­˜åœ¨ï¼Œè‡ªåŠ¨ä½¿ç”¨å¦ä¸€ç§è¯­è¨€
3. **çµæ´»æ€§**ï¼šæ”¯æŒåŠ¨æ€æ·»åŠ æ–°åˆ†ç±»ï¼Œåªéœ€æ›´æ–°é…ç½®æ–‡ä»¶
4. **æ€§èƒ½ä¼˜åŒ–**ï¼šä¸éœ€è¦åœ¨ i18n JSON ä¸­ç»´æŠ¤å¤§é‡åˆ†ç±»åç§°

**åˆ†ç±»ä¿¡æ¯å›½é™…åŒ–æ•ˆæœå±•ç¤º**ï¼š

![PCç«¯è‹±æ–‡åˆ†ç±»](/assets/Screenshots/PC-english/ç…§ç‰‡æŒ‰å†…å®¹ï¼ŒåŸå¸‚ï¼Œé¢œè‰²æ™ºèƒ½åˆ†ç±».png)

*PCç«¯è‹±æ–‡ç•Œé¢ï¼šæŒ‰å†…å®¹ã€åŸå¸‚ã€é¢œè‰²æ™ºèƒ½åˆ†ç±»*

![ç§»åŠ¨ç«¯è‹±æ–‡åˆ†ç±»-å†…å®¹](/assets/Screenshots/Mobile-english/ç…§ç‰‡æŒ‰å†…å®¹åˆ†ç±»ï¼ˆé•¿å›¾ï¼‰.jpg)

*ç§»åŠ¨ç«¯è‹±æ–‡ç•Œé¢ï¼šæŒ‰å†…å®¹åˆ†ç±»*

![ç§»åŠ¨ç«¯è‹±æ–‡åˆ†ç±»-åŸå¸‚](/assets/Screenshots/Mobile-english/ç…§ç‰‡æŒ‰åŸå¸‚åˆ†ç±»ï¼ˆé•¿å›¾ï¼‰.jpg)

*ç§»åŠ¨ç«¯è‹±æ–‡ç•Œé¢ï¼šæŒ‰åŸå¸‚åˆ†ç±»*

![ç§»åŠ¨ç«¯è‹±æ–‡åˆ†ç±»-é¢œè‰²](/assets/Screenshots/Mobile-english/ç…§ç‰‡æŒ‰é¢œè‰²åˆ†ç±»ï¼ˆé•¿å›¾ï¼‰.jpg)

*ç§»åŠ¨ç«¯è‹±æ–‡ç•Œé¢ï¼šæŒ‰é¢œè‰²åˆ†ç±»*

---

## ğŸ¤– æ™ºèƒ½æ£€æµ‹ä¿¡æ¯çš„å›½é™…åŒ–

### 5.1 æ‰«æè¿›åº¦æ¶ˆæ¯

#### 5.1.1 å®ç°ä½ç½®

**JavaScript ç‰ˆæœ¬**: `src/services/GalleryScannerService.js`
**Android åŸç”Ÿç‰ˆæœ¬**: `src/services/GalleryScannerService.android.js`

#### 5.1.2 ç¿»è¯‘é”®å®šä¹‰

| ç¿»è¯‘é”® | ä¸­æ–‡ | è‹±æ–‡ |
|--------|------|------|
| `home.scanProgress.initScanning` | åˆå§‹åŒ–æ‰«æ: å‡†å¤‡æ‰«æç¯å¢ƒ | Initializing scan: Preparing scan environment |
| `home.scanProgress.scanningFiles` | æ‰«ææ–‡ä»¶: {{processed}}/{{total}} | Scanning files: {{processed}}/{{total}} |
| `home.scanProgress.categoryQuery` | æŸ¥è¯¢åˆ†ç±»: {{processed}}/{{total}} | Querying categories: {{processed}}/{{total}} |
| `home.scanProgress.smartRecognitionStart` | å¼€å§‹æ™ºèƒ½è¯†åˆ« {{count}} å¼ å›¾ç‰‡ | Starting smart recognition for {{count}} images |
| `home.scanProgress.smartRecognition` | æ™ºèƒ½è¯†åˆ«: {{processed}}/{{total}} | Smart recognition: {{processed}}/{{total}} |
| `home.scanProgress.localRecognitionStart` | å¼€å§‹æœ¬åœ°è¯†åˆ« {{count}} å¼ å›¾ç‰‡ | Starting local recognition for {{count}} images |
| `home.scanProgress.localRecognition` | æœ¬åœ°è¯†åˆ«: {{processed}}/{{total}} | Local recognition: {{processed}}/{{total}} |
| `home.scanProgress.locationEnrichmentStart` | å¼€å§‹ä½ç½®ä¿¡æ¯ä¸°å¯Œ {{count}} å¼ å›¾ç‰‡ | Starting location enrichment for {{count}} images |
| `home.scanProgress.locationEnrichment` | ä½ç½®ä¿¡æ¯ä¸°å¯Œ: {{processed}}/{{total}} | Location enrichment: {{processed}}/{{total}} |
| `home.scanProgress.similarityDetectionStart` | å¼€å§‹ç›¸ä¼¼åº¦æ£€æµ‹ | Starting similarity detection |
| `home.scanProgress.similarityDetectionProgress` | ç›¸ä¼¼åº¦æ£€æµ‹: {{processed}}/{{total}} ({{groups}} ç»„) | Similarity detection: {{processed}}/{{total}} ({{groups}} groups) |
| `home.scanProgress.removingFiles` | ç§»é™¤æ–‡ä»¶: {{count}} | Removing files: {{count}} |
| `home.scanProgress.completed` | æ‰«æå®Œæˆ | Scan completed |

#### 5.1.3 å®ç°ç¤ºä¾‹

**JavaScript ç‰ˆæœ¬**ï¼š
```javascript
async processProgressData(rawProgress) {
  const { stage, filesProcessed, filesFound } = rawProgress;
  let simpleMessage = '';
  
  switch (stage) {
    case 'init_scanning':
      simpleMessage = i18n.t('home.scanProgress.initScanning');
      break;
    
    case 'scanning_files':
      simpleMessage = i18n.t('home.scanProgress.scanningFiles', {
        processed: filesProcessed || 0,
        total: filesFound || 0
      });
      break;
    
    case 'remote_inference':
      simpleMessage = i18n.t('home.scanProgress.smartRecognition', {
        processed: filesProcessed || 0,
        total: filesFound || 0
      });
      break;
    
    case 'similarity_detection':
      const groupsCount = this.imagesClassified || 0;
      simpleMessage = i18n.t('home.scanProgress.similarityDetectionProgress', {
        processed: filesProcessed,
        total: filesFound,
        groups: groupsCount
      });
      break;
    
    case 'completed':
      simpleMessage = i18n.t('home.scanProgress.completed');
      break;
  }
  
  return { simpleMessage, ... };
}
```

**Android åŸç”Ÿç‰ˆæœ¬**ï¼ˆç±»ä¼¼å®ç°ï¼Œä½†æ”¯æŒæ›´å¤šé˜¶æ®µï¼‰ï¼š
```javascript
case 'remote_inference':
  if (filesFound > 0 && filesProcessed === 0) {
    simpleMessage = i18n.t('home.scanProgress.smartRecognitionStart', { count: filesFound });
  } else {
    simpleMessage = i18n.t('home.scanProgress.smartRecognition', {
      processed: filesProcessed || 0,
      total: filesFound || 0
    });
  }
  break;
```

**æ‰«æè¿›åº¦æ¶ˆæ¯å›½é™…åŒ–æ•ˆæœå±•ç¤º**ï¼š

![ç§»åŠ¨ç«¯æ‰«æè¿›åº¦](/assets/Screenshots/Mobile-english/é¦–é¡µ-ç…§ç‰‡æ‰«æè¿›å±•æ˜¾ç¤º.jpg)

*ç§»åŠ¨ç«¯è‹±æ–‡ç•Œé¢ï¼šç…§ç‰‡æ‰«æè¿›å±•æ˜¾ç¤º*

---

### 5.2 æ£€æµ‹ç»“æœæ ‡ç­¾

#### 5.2.1 ç¿»è¯‘é”®å®šä¹‰

| ç¿»è¯‘é”® | ä¸­æ–‡ | è‹±æ–‡ |
|--------|------|------|
| `imagePreview.detectionResult` | æ£€æµ‹ç»“æœ | Detection Result |
| `imagePreview.classificationComplete` | åˆ†ç±»å®Œæˆ | Classification Complete |
| `imagePreview.objects` | ä¸ªå¯¹è±¡ | objects |
| `imagePreview.idCardDetection` | èº«ä»½è¯æ£€æµ‹ | ID Card Detection |
| `imagePreview.idCardFront` | èº«ä»½è¯æ­£é¢ | ID Card Front |
| `imagePreview.idCardBack` | èº«ä»½è¯èƒŒé¢ | ID Card Back |
| `imagePreview.generalDetection` | é€šç”¨ç‰©ä½“æ£€æµ‹ | General Object Detection |
| `imagePreview.uncategorizedCategory` | æœªåˆ†ç±» | Uncategorized |
| `imagePreview.unknownCategoryName` | æœªçŸ¥åˆ†ç±» | Unknown Category |

#### 5.2.2 ä½¿ç”¨ç¤ºä¾‹

**æ–‡ä»¶ä½ç½®**: `src/screens/desktop/ImagePreviewScreen.desktop.js`

```javascript
{/* æ£€æµ‹ç»“æœæ˜¾ç¤º */}
<View style={styles.infoRow}>
  <Text style={styles.infoLabel}>
    ğŸ” {t('imagePreview.detectionResult')}:
  </Text>
  <Text style={styles.infoValue}>
    {currentImage.message && currentImage.message !== i18n.t('imagePreview.classificationComplete') 
      ? currentImage.message 
      : `${((currentImage.idCardDetections?.length || 0) + (currentImage.generalDetections?.length || 0))}${t('imagePreview.objects')}`
    }
  </Text>
</View>

{/* èº«ä»½è¯æ£€æµ‹ç»“æœ */}
{currentImage.idCardDetections && currentImage.idCardDetections.length > 0 && (
  <View style={styles.detectionSection}>
    <Text style={styles.detectionTitle}>
      ğŸ†” {t('imagePreview.idCardDetection')}:
    </Text>
    {currentImage.idCardDetections.map((detection, index) => (
      <View key={index} style={styles.detectionItem}>
        <Text style={styles.detectionText}>
          {detection.class === 'id_card_front' 
            ? t('imagePreview.idCardFront') 
            : t('imagePreview.idCardBack')
          }
          ({(detection.confidence * 100).toFixed(1)}%)
        </Text>
      </View>
    ))}
  </View>
)}
```

**æ£€æµ‹ç»“æœå›½é™…åŒ–æ•ˆæœå±•ç¤º**ï¼š

![PCç«¯ç…§ç‰‡é¢„è§ˆ](/assets/Screenshots/PC-english/ç…§ç‰‡é¢„è§ˆä»¥åŠä¿¡æ¯æŸ¥çœ‹.png)

*PCç«¯è‹±æ–‡ç•Œé¢ï¼šç…§ç‰‡é¢„è§ˆä»¥åŠä¿¡æ¯æŸ¥çœ‹*

![ç§»åŠ¨ç«¯ç…§ç‰‡é¢„è§ˆ](/assets/Screenshots/Mobile-english/å•ç…§ç‰‡é¢„è§ˆ.jpg)

*ç§»åŠ¨ç«¯è‹±æ–‡ç•Œé¢ï¼šå•ç…§ç‰‡é¢„è§ˆ*

![ç§»åŠ¨ç«¯ç…§ç‰‡è¯¦ç»†ä¿¡æ¯](/assets/Screenshots/Mobile-english/æŸ¥çœ‹å•ç…§ç‰‡çš„è¯¦ç»†ä¿¡æ¯.jpg)

*ç§»åŠ¨ç«¯è‹±æ–‡ç•Œé¢ï¼šæŸ¥çœ‹å•ç…§ç‰‡çš„è¯¦ç»†ä¿¡æ¯*

![ç§»åŠ¨ç«¯ç›¸ä¼¼ç…§ç‰‡æ£€æµ‹](/assets/Screenshots/Mobile-english/ç…§ç‰‡ç›¸ä¼¼ç»„æ£€æµ‹.jpg)

*ç§»åŠ¨ç«¯è‹±æ–‡ç•Œé¢ï¼šç…§ç‰‡ç›¸ä¼¼ç»„æ£€æµ‹*

---

## ğŸ’» åŸç”Ÿä»£ç å’ŒJSä»£ç çš„å›½é™…åŒ–

### 6.1 JavaScript ä»£ç å›½é™…åŒ–

#### 6.1.1 æ ‡å‡†å®ç°

**å¯¼å…¥å’Œä½¿ç”¨**ï¼š
```javascript
import { useTranslation } from 'react-i18next';
import i18n, { getCurrentLanguageAsync } from '../../i18n';

const MyComponent = () => {
  const { t, i18n } = useTranslation('common');
  
  // ä½¿ç”¨ç¿»è¯‘å‡½æ•°
  const message = t('home.ready');
  
  // è·å–å½“å‰è¯­è¨€
  const currentLang = i18n.language || 'zh';
  
  // æŒ‡å®šè¯­è¨€ç¿»è¯‘
  const englishMessage = i18n.t('home.ready', { lng: 'en' });
};
```

#### 6.1.2 å¼‚æ­¥è¯­è¨€è·å–

**åœºæ™¯**ï¼šåœ¨é React ç»„ä»¶ä¸­ï¼ˆå¦‚ Service ç±»ï¼‰éœ€è¦è·å–å½“å‰è¯­è¨€ã€‚

**å®ç°**ï¼š
```javascript
import { getCurrentLanguageAsync } from '../i18n';

class MyService {
  async doSomething() {
    // å¼‚æ­¥è·å–å½“å‰è¯­è¨€è®¾ç½®
    const currentLanguage = await getCurrentLanguageAsync();
    
    // æ ¹æ®è¯­è¨€æ‰§è¡Œä¸åŒé€»è¾‘
    if (currentLanguage === 'en') {
      // è‹±æ–‡é€»è¾‘
    } else {
      // ä¸­æ–‡é€»è¾‘
    }
  }
}
```

---

### 6.2 Android åŸç”Ÿä»£ç å›½é™…åŒ–

#### 6.2.1 è¯­è¨€å‚æ•°ä¼ é€’

**å®ç°ä½ç½®**: `android/app/src/main/java/com/imageclassifier/v2/GalleryScanService.java`

**å…³é”®æ­¥éª¤**ï¼š

1. **è¯»å–è¯­è¨€è®¾ç½®**ï¼š
   ```java
   // ä» ImageStorageService è¯»å–è¯­è¨€è®¾ç½®
   String language = getLanguageFromSettings(); // è¿”å› "zh" æˆ– "en"
   ```

2. **ä¼ é€’è¯­è¨€å‚æ•°**ï¼š
   ```java
   // åœ¨åŸå¸‚æŸ¥è¯¢æ—¶ä¼ é€’è¯­è¨€å‚æ•°
   Map<String, String> location = getCityLocation(latitude, longitude, language);
   ```

3. **æ ¹æ®è¯­è¨€è¿”å›å¯¹åº”æ–‡æœ¬**ï¼š
   ```java
   if ("en".equals(language)) {
       cityName = mainCity.optString("name", mainCity.optString("name_zh", ""));
       country = "China";
   } else {
       cityName = mainCity.optString("name_zh", mainCity.optString("name", ""));
       country = "ä¸­å›½";
   }
   ```

#### 6.2.2 åŸç”Ÿä»£ç é™åˆ¶

**å½“å‰å®ç°**ï¼š
- âœ… **åŸå¸‚åç§°**ï¼šåŸç”Ÿä»£ç æ ¹æ®è¯­è¨€è®¾ç½®è¿”å›å¯¹åº”è¯­è¨€çš„åŸå¸‚åç§°
- âœ… **å›½å®¶åç§°**ï¼šæ ¹æ®è¯­è¨€è¿”å› "China" æˆ– "ä¸­å›½"
- âŒ **å…¶ä»–æ–‡æœ¬**ï¼šåŸç”Ÿä»£ç ä¸­çš„å…¶ä»–æ–‡æœ¬ï¼ˆå¦‚é”™è¯¯æ¶ˆæ¯ï¼‰ç›®å‰æœªå›½é™…åŒ–

**æœªæ¥æ”¹è¿›å»ºè®®**ï¼š
- è€ƒè™‘ä½¿ç”¨ Android çš„ `Resources` ç³»ç»Ÿè¿›è¡Œå›½é™…åŒ–
- æˆ–è€…å°†æ›´å¤šæ–‡æœ¬é€»è¾‘ç§»åˆ° JavaScript å±‚å¤„ç†

---

## ğŸ”„ PCç«¯å’Œç§»åŠ¨ç«¯å›½é™…åŒ–çš„ä¸€è‡´æ€§

### 7.1 å…±äº«é…ç½®

#### 7.1.1 ç»Ÿä¸€çš„ i18n é…ç½®

**æ–‡ä»¶ä½ç½®**: `src/i18n/index.js`

**å…³é”®ç‰¹æ€§**ï¼š
- âœ… **è·¨å¹³å°å…¼å®¹**ï¼šä½¿ç”¨ `compatibilityJSON: 'v3'` ç¡®ä¿ React Native å…¼å®¹æ€§
- âœ… **ç»Ÿä¸€è¯­è¨€èµ„æº**ï¼šPCç«¯å’Œç§»åŠ¨ç«¯ä½¿ç”¨ç›¸åŒçš„ç¿»è¯‘æ–‡ä»¶
- âœ… **ç»Ÿä¸€è¯­è¨€è®¾ç½®**ï¼šè¯­è¨€è®¾ç½®å­˜å‚¨åœ¨ `ImageStorageService` ä¸­ï¼ŒPCç«¯ä½¿ç”¨ IndexedDBï¼Œç§»åŠ¨ç«¯ä½¿ç”¨ SQLite

#### 7.1.2 ç»Ÿä¸€çš„è¯­è¨€è®¾ç½®ç®¡ç†

**å­˜å‚¨æ–¹æ¡ˆ**ï¼š
- **PCç«¯**: `ImageStorageService` â†’ `IndexedDB` â†’ `settings.app_language`
- **ç§»åŠ¨ç«¯**: `ImageStorageService` â†’ `SQLite` â†’ `settings.app_language`

**è¯»å–å’Œä¿å­˜**ï¼š
```javascript
// ç»Ÿä¸€çš„ APIï¼Œè‡ªåŠ¨é€‚é…å¹³å°
const storageService = await getImageStorageService();
const settings = await storageService.getSettings();
const language = settings.app_language || 'zh';

// ä¿å­˜è¯­è¨€è®¾ç½®
await storageService.saveSettings({ ...settings, app_language: 'en' });
```

---

### 7.2 ç»„ä»¶å®ç°ä¸€è‡´æ€§

#### 7.2.1 ç›¸åŒçš„ç¿»è¯‘é”®

**PCç«¯å’Œç§»åŠ¨ç«¯ä½¿ç”¨ç›¸åŒçš„ç¿»è¯‘é”®**ï¼š
- `src/screens/desktop/HomeScreen.desktop.js`
- `src/screens/mobile/HomeScreen.mobile.js`

ä¸¤è€…éƒ½ä½¿ç”¨ç›¸åŒçš„ç¿»è¯‘é”®ï¼Œå¦‚ï¼š
- `home.ready`
- `home.scanning`
- `category.noImages`
- `imagePreview.detectionResult`

#### 7.2.2 ç›¸åŒçš„å®ç°æ¨¡å¼

**åˆ†ç±»åç§°å¤„ç†**ï¼š
```javascript
// PCç«¯å’Œç§»åŠ¨ç«¯ä½¿ç”¨ç›¸åŒçš„é€»è¾‘
const currentLang = i18n.language || 'zh';
const categoryName = currentLang === 'en' 
  ? (category.english || category.chinese)
  : (category.chinese || category.english);
```

**é¢œè‰²åç§°ç¿»è¯‘**ï¼š
```javascript
// PCç«¯å’Œç§»åŠ¨ç«¯éƒ½ä½¿ç”¨ç›¸åŒçš„å·¥å…·å‡½æ•°
import { getColorNameTranslation } from '../../i18n';

const displayColorName = getColorNameTranslation(color, i18n.language);
```

**PCç«¯å’Œç§»åŠ¨ç«¯å›½é™…åŒ–ä¸€è‡´æ€§å±•ç¤º**ï¼š

![PCç«¯åˆ†ç±»å±•ç¤º](/assets/Screenshots/PC-english/ç…§ç‰‡æŒ‰å†…å®¹ï¼ŒåŸå¸‚ï¼Œé¢œè‰²æ™ºèƒ½åˆ†ç±».png)

*PCç«¯è‹±æ–‡ç•Œé¢ï¼šæŒ‰å†…å®¹ã€åŸå¸‚ã€é¢œè‰²æ™ºèƒ½åˆ†ç±»*

![ç§»åŠ¨ç«¯åˆ†ç±»å±•ç¤º](/assets/Screenshots/Mobile-english/é¦–é¡µè‡ªåŠ¨æ˜¾ç¤ºæŒ‰å†…å®¹ï¼ŒæŒ‰åŸå¸‚ï¼ŒæŒ‰é¢œè‰²åˆ†ç±»çš„ç»´åº¦.jpg)

*ç§»åŠ¨ç«¯è‹±æ–‡ç•Œé¢ï¼šé¦–é¡µè‡ªåŠ¨æ˜¾ç¤ºæŒ‰å†…å®¹ã€æŒ‰åŸå¸‚ã€æŒ‰é¢œè‰²åˆ†ç±»çš„ç»´åº¦*

![PCç«¯æ ¼å¼åˆ†ç±»](/assets/Screenshots/PC-english/ç…§ç‰‡è‡ªåŠ¨æŒ‰å­˜å‚¨ï¼Œæ ¼å¼ï¼Œåˆ†è¾¨ç‡åˆ†ç±».png)

*PCç«¯è‹±æ–‡ç•Œé¢ï¼šç…§ç‰‡è‡ªåŠ¨æŒ‰å­˜å‚¨ã€æ ¼å¼ã€åˆ†è¾¨ç‡åˆ†ç±»*

![ç§»åŠ¨ç«¯æ ¼å¼åˆ†ç±»](/assets/Screenshots/Mobile-english/ç…§ç‰‡æŒ‰æ ¼å¼ï¼Œåˆ†è¾¨ç‡ï¼Œå’Œæ‹æ‘„æ–¹å‘åˆ†ç±».jpg)

*ç§»åŠ¨ç«¯è‹±æ–‡ç•Œé¢ï¼šç…§ç‰‡æŒ‰æ ¼å¼ã€åˆ†è¾¨ç‡å’Œæ‹æ‘„æ–¹å‘åˆ†ç±»*

---

### 7.3 æ•°æ®ä¸€è‡´æ€§

#### 7.3.1 åŸå¸‚ä¿¡æ¯

**PCç«¯å’Œç§»åŠ¨ç«¯**ï¼š
- âœ… ä½¿ç”¨ç›¸åŒçš„ `CityLocationService`
- âœ… ä½¿ç”¨ç›¸åŒçš„è¿œç¨‹APIå’Œæœ¬åœ°æ•°æ®
- âœ… æ ¹æ®ç›¸åŒçš„è¯­è¨€è®¾ç½®ä¿å­˜åŸå¸‚åç§°

**åŸå¸‚ä¿¡æ¯å›½é™…åŒ–æ•ˆæœå±•ç¤º**ï¼š

![ç§»åŠ¨ç«¯åŸå¸‚åˆ†ç±»](/assets/Screenshots/Mobile-english/ç…§ç‰‡æŒ‰åŸå¸‚åˆ†ç±»ï¼ˆé•¿å›¾ï¼‰.jpg)

*ç§»åŠ¨ç«¯è‹±æ–‡ç•Œé¢ï¼šç…§ç‰‡æŒ‰åŸå¸‚åˆ†ç±»*

#### 7.3.2 åˆ†ç±»ä¿¡æ¯

**PCç«¯å’Œç§»åŠ¨ç«¯**ï¼š
- âœ… ä½¿ç”¨ç›¸åŒçš„ `ConfigService`
- âœ… è¯»å–ç›¸åŒçš„ `initialSettings.json`
- âœ… ä½¿ç”¨ç›¸åŒçš„åˆ†ç±»åç§°æ˜ å°„é€»è¾‘

**åˆ†ç±»ä¿¡æ¯ä¸€è‡´æ€§å±•ç¤º**ï¼š

![ç§»åŠ¨ç«¯ç¤¾äº¤æ´»åŠ¨åˆ†ç±»](/assets/Screenshots/Mobile-english/ç…§ç‰‡ç¤¾äº¤æ´»åŠ¨ç±»åˆ«æµè§ˆï¼ˆé•¿å›¾ï¼‰.jpg)

*ç§»åŠ¨ç«¯è‹±æ–‡ç•Œé¢ï¼šç…§ç‰‡ç¤¾äº¤æ´»åŠ¨ç±»åˆ«æµè§ˆ*

---

## ğŸ”§ åŠ¨æ€å†…å®¹çš„å¤„ç†æ–¹æ¡ˆ

### 8.1 æœåŠ¡å™¨è¿”å›å†…å®¹çš„å›½é™…åŒ–

#### 8.1.1 é¢œè‰²åç§°ç¿»è¯‘

**é—®é¢˜**ï¼šæœåŠ¡å™¨APIè¿”å›çš„é¢œè‰²åç§°å¯èƒ½æ˜¯ä¸­æ–‡æˆ–è‹±æ–‡ï¼Œéœ€è¦æ ¹æ®ç”¨æˆ·è¯­è¨€è®¾ç½®ç¿»è¯‘ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼šä½¿ç”¨é¢œè‰²åç§°æ˜ å°„è¡¨ã€‚

**å®ç°ä½ç½®**: `src/i18n/index.js`

```javascript
const COLOR_NAME_MAP = {
  // ä¸­æ–‡ -> è‹±æ–‡
  'æ©™è‰²': 'Orange',
  'è“è‰²': 'Blue',
  'çº¢è‰²': 'Red',
  // ... æ›´å¤šæ˜ å°„
  // è‹±æ–‡ -> ä¸­æ–‡
  'Orange': 'æ©™è‰²',
  'Blue': 'è“è‰²',
  'Red': 'çº¢è‰²',
  // ... æ›´å¤šæ˜ å°„
};

export const getColorNameTranslation = (colorName, language = null) => {
  const targetLang = language || getCurrentLanguage();
  const normalizedColorName = colorName.trim();
  
  if (targetLang === 'zh') {
    // ç›®æ ‡è¯­è¨€æ˜¯ä¸­æ–‡
    // å¦‚æœå·²ç»æ˜¯ä¸­æ–‡ï¼Œç›´æ¥è¿”å›
    if (COLOR_NAME_MAP[normalizedColorName] && 
        ['æ©™è‰²', 'è“è‰²', 'çº¢è‰²', ...].includes(normalizedColorName)) {
      return normalizedColorName;
    }
    // å°è¯•ä»è‹±æ–‡æ˜ å°„åˆ°ä¸­æ–‡
    const chineseName = COLOR_NAME_MAP[normalizedColorName];
    if (chineseName) return chineseName;
  } else {
    // ç›®æ ‡è¯­è¨€æ˜¯è‹±æ–‡
    // å¦‚æœå·²ç»æ˜¯è‹±æ–‡ï¼Œç›´æ¥è¿”å›ï¼ˆé¦–å­—æ¯å¤§å†™ï¼‰
    const englishNames = ['Orange', 'Blue', 'Red', ...];
    if (englishNames.includes(normalizedColorName)) {
      return normalizedColorName.charAt(0).toUpperCase() + normalizedColorName.slice(1).toLowerCase();
    }
    // å°è¯•ä»ä¸­æ–‡æ˜ å°„åˆ°è‹±æ–‡
    const englishName = COLOR_NAME_MAP[normalizedColorName];
    if (englishName) return englishName;
  }
  
  // å¦‚æœæ‰¾ä¸åˆ°æ˜ å°„ï¼Œè¿”å›åŸå§‹å€¼
  return colorName;
};
```

**ä½¿ç”¨ä½ç½®**: `src/screens/desktop/HomeScreen.desktop.js`

```javascript
import { getColorNameTranslation } from '../../i18n';

const ColorCard = ({ color }) => {
  const displayColorName = useMemo(() => {
    return getColorNameTranslation(color, i18n.language);
  }, [color, i18n.language]);
  
  return <Text>{displayColorName}</Text>;
};
```

#### 8.1.2 æ–¹å‘åç§°ç¿»è¯‘

**ç±»ä¼¼å®ç°**ï¼šä½¿ç”¨æ–¹å‘åç§°æ˜ å°„è¡¨ã€‚

**å®ç°ä½ç½®**: `src/i18n/index.js`

```javascript
const ORIENTATION_NAME_MAP = {
  'æ¨ªå±': 'Landscape',
  'ç«–å±': 'Portrait',
  'æ­£æ–¹å½¢': 'Square',
  'å…¨æ™¯': 'Panorama',
  // ... åå‘æ˜ å°„
};

export const getOrientationNameTranslation = (orientationName, language = null) => {
  // ç±»ä¼¼é¢œè‰²åç§°ç¿»è¯‘çš„å®ç°
  // ...
};
```

---

### 8.2 åŠ¨æ€æ¶ˆæ¯çš„å›½é™…åŒ–

#### 8.2.1 å¸¦å‚æ•°çš„ç¿»è¯‘

**å®ç°**ï¼šä½¿ç”¨ i18n çš„æ’å€¼åŠŸèƒ½ã€‚

```javascript
// ç¿»è¯‘é”®å®šä¹‰
{
  "home.scanProgress.scanningFiles": "æ‰«ææ–‡ä»¶: {{processed}}/{{total}}",
  "home.scanProgress.similarityDetectionProgress": "ç›¸ä¼¼åº¦æ£€æµ‹: {{processed}}/{{total}} ({{groups}} ç»„)"
}

// ä½¿ç”¨
i18n.t('home.scanProgress.scanningFiles', {
  processed: 10,
  total: 100
});
// è¾“å‡º: "æ‰«ææ–‡ä»¶: 10/100"
```

#### 8.2.2 AI æè¿°æ¶ˆæ¯

**é—®é¢˜**ï¼šAI è¿”å›çš„æè¿°æ¶ˆæ¯å¯èƒ½æ˜¯ä¸­æ–‡æˆ–è‹±æ–‡ï¼Œéœ€è¦æ ¹æ®ç”¨æˆ·è¯­è¨€è®¾ç½®å¤„ç†ã€‚

**å½“å‰å®ç°**ï¼š
- AI æè¿°æ¶ˆæ¯ç›´æ¥æ˜¾ç¤ºï¼Œä¸åšç¿»è¯‘ï¼ˆå› ä¸º AI æœ¬èº«ä¼šæ ¹æ®ä¸Šä¸‹æ–‡ç”Ÿæˆå¯¹åº”è¯­è¨€çš„æè¿°ï¼‰
- å¦‚æœ AI è¿”å›çš„æ¶ˆæ¯ä¸ç¬¦åˆç”¨æˆ·è¯­è¨€è®¾ç½®ï¼Œå¯èƒ½éœ€è¦æ”¹è¿› AI æç¤ºè¯

**æœªæ¥æ”¹è¿›å»ºè®®**ï¼š
- åœ¨ AI è¯·æ±‚æ—¶ä¼ é€’è¯­è¨€å‚æ•°ï¼Œç¡®ä¿è¿”å›å¯¹åº”è¯­è¨€çš„æè¿°
- æˆ–è€…åœ¨åç«¯è¿›è¡Œç¿»è¯‘

---

## ğŸ“ æœ€ä½³å®è·µæ€»ç»“

### 9.1 ç¿»è¯‘é”®å‘½åè§„èŒƒ

1. **ä½¿ç”¨æœ‰æ„ä¹‰çš„å‘½åç©ºé—´**ï¼š`home.*`, `category.*`, `imagePreview.*`
2. **ä½¿ç”¨æè¿°æ€§çš„é”®å**ï¼š`home.scanComplete` è€Œä¸æ˜¯ `home.msg1`
3. **ä¿æŒä¸€è‡´æ€§**ï¼šPCç«¯å’Œç§»åŠ¨ç«¯ä½¿ç”¨ç›¸åŒçš„ç¿»è¯‘é”®

### 9.2 åŠ¨æ€å†…å®¹å¤„ç†

1. **æœåŠ¡å™¨è¿”å›å†…å®¹**ï¼šä½¿ç”¨æ˜ å°„è¡¨è¿›è¡Œç¿»è¯‘ï¼ˆå¦‚é¢œè‰²åç§°ã€æ–¹å‘åç§°ï¼‰
2. **é…ç½®æ•°æ®**ï¼šä»é…ç½®æ–‡ä»¶è¯»å–ä¸­è‹±æ–‡åç§°ï¼ŒåŠ¨æ€é€‰æ‹©ï¼ˆå¦‚åˆ†ç±»åç§°ï¼‰
3. **æ‰«ææ—¶ä¿å­˜**ï¼šæ ¹æ®ç”¨æˆ·è¯­è¨€è®¾ç½®ä¿å­˜å¯¹åº”è¯­è¨€çš„æ•°æ®ï¼ˆå¦‚åŸå¸‚åç§°ï¼‰

### 9.3 è¯­è¨€è®¾ç½®ç®¡ç†

1. **ç»Ÿä¸€å­˜å‚¨**ï¼šä½¿ç”¨ `ImageStorageService` ç»Ÿä¸€ç®¡ç†è¯­è¨€è®¾ç½®
2. **å¼‚æ­¥è¯»å–**ï¼šåœ¨ Service ç±»ä¸­ä½¿ç”¨ `getCurrentLanguageAsync()` å¼‚æ­¥è¯»å–
3. **éªŒè¯ä¿å­˜**ï¼šåˆ‡æ¢è¯­è¨€åéªŒè¯ä¿å­˜æ˜¯å¦æˆåŠŸ

### 9.4 å¼¹çª—å’Œå¼‚æ­¥å›è°ƒ

1. **ä½¿ç”¨å½“å‰è¯­è¨€**ï¼šåœ¨å¼‚æ­¥å›è°ƒä¸­ä½¿ç”¨ `i18n.t(key, { lng: currentLang })` è€Œä¸æ˜¯é—­åŒ…ä¸­çš„ `t` å‡½æ•°
2. **æ˜¾å¼æŒ‡å®šè¯­è¨€**ï¼šç¡®ä¿ä½¿ç”¨æœ€æ–°çš„è¯­è¨€å€¼

**åŠŸèƒ½æ“ä½œå›½é™…åŒ–æ•ˆæœå±•ç¤º**ï¼š

![PCç«¯æ‰¹é‡æ“ä½œ](/assets/Screenshots/PC-english/ç…§ç‰‡æ‰¹é‡é€‰æ‹©.png)

*PCç«¯è‹±æ–‡ç•Œé¢ï¼šç…§ç‰‡æ‰¹é‡é€‰æ‹©*

![ç§»åŠ¨ç«¯æ‰¹é‡æ“ä½œ](/assets/Screenshots/Mobile-english/ç…§ç‰‡æ‰¹é‡é€‰ä¸­.jpg)

*ç§»åŠ¨ç«¯è‹±æ–‡ç•Œé¢ï¼šç…§ç‰‡æ‰¹é‡é€‰ä¸­*

![PCç«¯AIä¿®å›¾](/assets/Screenshots/PC-english/aiä¿®å›¾-è‰²å½©ä¼˜åŒ–ï¼ˆä¸€é”®æ“ä½œï¼‰.png)

*PCç«¯è‹±æ–‡ç•Œé¢ï¼šAIä¿®å›¾-è‰²å½©ä¼˜åŒ–ï¼ˆä¸€é”®æ“ä½œï¼‰*

![ç§»åŠ¨ç«¯AIä¿®å›¾](/assets/Screenshots/Mobile-english/å•ç…§ç‰‡AIä¿®å›¾-å¤„ç†ä¸­.jpg)

*ç§»åŠ¨ç«¯è‹±æ–‡ç•Œé¢ï¼šå•ç…§ç‰‡AIä¿®å›¾-å¤„ç†ä¸­*

---

## ğŸš€ æœªæ¥æ”¹è¿›å»ºè®®

### 10.1 å·²å®ç°åŠŸèƒ½

- âœ… åŸºç¡€ç•Œé¢æ–‡æœ¬å›½é™…åŒ–
- âœ… å¼¹çª—å›½é™…åŒ–ï¼ˆåŒ…æ‹¬åŠ¨æ€è¯­è¨€åˆ‡æ¢ï¼‰
- âœ… åŸå¸‚ä¿¡æ¯å›½é™…åŒ–ï¼ˆæ‰«ææ—¶ä¿å­˜ï¼‰
- âœ… åˆ†ç±»ä¿¡æ¯å›½é™…åŒ–ï¼ˆé…ç½®æ–‡ä»¶è¯»å–ï¼‰
- âœ… æ™ºèƒ½æ£€æµ‹ä¿¡æ¯å›½é™…åŒ–ï¼ˆæ‰«æè¿›åº¦ã€æ£€æµ‹ç»“æœï¼‰
- âœ… é¢œè‰²åç§°ç¿»è¯‘ï¼ˆæ˜ å°„è¡¨ï¼‰
- âœ… æ–¹å‘åç§°ç¿»è¯‘ï¼ˆæ˜ å°„è¡¨ï¼‰
- âœ… PCç«¯å’Œç§»åŠ¨ç«¯ä¸€è‡´æ€§

### 10.2 å¾…æ”¹è¿›åŠŸèƒ½

1. **åŸå¸‚åç§°æ˜ å°„è¡¨**ï¼š
   - è€ƒè™‘åˆ›å»ºåŸå¸‚åç§°æ˜ å°„è¡¨ï¼Œæ”¯æŒå·²å­˜å‚¨æ•°æ®çš„å›½é™…åŒ–æ˜¾ç¤º
   - é¿å…é‡æ–°æ‰«ææ‰èƒ½çœ‹åˆ°å¯¹åº”è¯­è¨€çš„åŸå¸‚åç§°

2. **Android åŸç”Ÿä»£ç å›½é™…åŒ–**ï¼š
   - ä½¿ç”¨ Android `Resources` ç³»ç»Ÿè¿›è¡Œæ›´å…¨é¢çš„å›½é™…åŒ–
   - æˆ–è€…å°†æ›´å¤šæ–‡æœ¬é€»è¾‘ç§»åˆ° JavaScript å±‚

3. **AI æè¿°æ¶ˆæ¯**ï¼š
   - åœ¨ AI è¯·æ±‚æ—¶ä¼ é€’è¯­è¨€å‚æ•°
   - ç¡®ä¿è¿”å›å¯¹åº”è¯­è¨€çš„æè¿°

4. **æ—¥æœŸæ ¼å¼åŒ–**ï¼š
   - ä½¿ç”¨ i18n çš„æ—¥æœŸæ ¼å¼åŒ–åŠŸèƒ½
   - ç»Ÿä¸€æ—¥æœŸæ˜¾ç¤ºæ ¼å¼

5. **æ•°å­—æ ¼å¼åŒ–**ï¼š
   - æ ¹æ®è¯­è¨€è®¾ç½®æ ¼å¼åŒ–æ•°å­—ï¼ˆå¦‚åƒä½åˆ†éš”ç¬¦ï¼‰

---

## ğŸ“š ç›¸å…³æ–‡ä»¶æ¸…å•

### æ ¸å¿ƒæ–‡ä»¶

- `src/i18n/index.js` - i18n é…ç½®å’Œå·¥å…·å‡½æ•°
- `src/i18n/locales/zh/common.json` - ä¸­æ–‡ç¿»è¯‘èµ„æº
- `src/i18n/locales/en/common.json` - è‹±æ–‡ç¿»è¯‘èµ„æº

### æœåŠ¡æ–‡ä»¶

- `src/services/ImageStorageService.js` - è¯­è¨€è®¾ç½®å­˜å‚¨
- `src/services/CityLocationService.js` - åŸå¸‚ä¿¡æ¯å›½é™…åŒ–
- `src/services/ConfigService.js` - åˆ†ç±»ä¿¡æ¯å›½é™…åŒ–
- `src/services/GalleryScannerService.js` - æ‰«æè¿›åº¦æ¶ˆæ¯å›½é™…åŒ–

### åŸç”Ÿä»£ç 

- `android/app/src/main/java/com/imageclassifier/v2/GalleryScanService.java` - Android åŸç”ŸåŸå¸‚ä¿¡æ¯å›½é™…åŒ–

### é…ç½®æ–‡ä»¶

- `public/initialSettings.json` - åˆ†ç±»åç§°é…ç½®

---

## ğŸ“– å‚è€ƒèµ„æ–™

- [i18next å®˜æ–¹æ–‡æ¡£](https://www.i18next.com/)
- [react-i18next å®˜æ–¹æ–‡æ¡£](https://react.i18next.com/)
- [React Native å›½é™…åŒ–æœ€ä½³å®è·µ](https://reactnative.dev/docs/internationalization)

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0  
**æœ€åæ›´æ–°**: 2025-01-20  
**ç»´æŠ¤è€…**: èŠ¯å›¾ç›¸å†Œå¼€å‘å›¢é˜Ÿ

